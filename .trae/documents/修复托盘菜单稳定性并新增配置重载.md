## 目标
1) 修复右键菜单闪退：稳定焦点与交互，避免悬浮窗守护抢焦点导致菜单关闭，完善异常日志。
2) 新增“重载配置”能力：托盘菜单提供手动重载项，增加文件修改监听并提示重载，确保新股票代码即时生效。

## 修复右键菜单闪退
- 暂停/恢复悬浮窗守护：
  - 在托盘菜单打开时调用 `FloatingWindow.pause_guard()`，菜单关闭后调用 `resume_guard()`。
  - 重新注册托盘菜单开关回调：`src/app.py:346-356` 绑定 `set_on_menu_open/_close`。
- 延迟恢复守护：
  - 在菜单关闭事件中使用 `wx.CallLater(200, resume_guard)`，避免立刻抢焦点；触发位置：`src/ui/tray_icon.py:123-134` 对应的 `_on_menu_close`。
- 取消双击干扰：保持托盘左键双击禁用（已处理在 `src/ui/tray_icon.py:88-90, 297-301`）。
- 强化错误处理与日志：
  - 保留现有 try/except 包裹菜单打开/关闭回调（`src/ui/tray_icon.py:123-129, 377-384`），新增更明确的日志前缀与错误等级，不影响菜单生命周期。

## 新增“重载配置”与自动监听
- 托盘菜单添加“重载配置”：
  - 在 `CreatePopupMenu` 中添加 `"重载配置"` 条目，仅保留两项：`"重载配置"` 与 `"退出"`（位置：`src/ui/tray_icon.py:116-152`）。
  - 为其增加独立回调：新增 `set_on_reload_config(callback)` 与 `_on_reload_config`（文件同上），在 `src/app.py` 绑定到 `_reload_configuration`。
- 配置文件监听并提示：
  - 在 `ETFMonitorApp` 中新增 `wx.Timer` 定时器（例如 1s）：`self._config_watch_timer`，在 `_start_services` 启动，绑定 `_on_config_watch_timer`。
  - 逻辑：读取 `config.json` 的 `mtime`（路径由 `ConfigManager.DEFAULT_CONFIG_FILE`，见 `src/config/manager.py:31-34, 108-112`）；当 `mtime` 变化时弹窗 `wx.MessageBox("检测到配置文件变更，是否重载？")`，确认后调用 `_reload_configuration()` 并更新 `self._config_mtime`；用防抖标志避免重复提示。
- 重载实现与即时生效：
  - 使用已存在的 `_reload_configuration()`（`src/app.py:383-416`），其会 `config.reload()` 并更新 `etf_list`、`refresh_interval`、托盘轮播与悬浮窗显示。
  - 确保数据抓取器接受新 `etf_list`（`src/app.py:390-394`）并立即开始刷新。

## 代码改动清单（关键位置）
- `src/ui/tray_icon.py`
  - 添加“重载配置”菜单项与绑定。
  - 在 `_on_menu_close` 中增加 `wx.CallLater(200, ...)` 延迟恢复守护（回调仍由 `app.py` 提供）。
- `src/app.py`
  - 重新绑定托盘菜单开/关事件：`set_on_menu_open/_close`，对应 `FloatingWindow.pause_guard()/resume_guard()`。
  - 绑定新回调：`set_on_reload_config(self._reload_configuration)`。
  - 新增配置文件监听定时器：维护 `self._config_mtime`、实现 `_on_config_watch_timer`。
- `src/config/manager.py`
  - 复用 `DEFAULT_CONFIG_FILE` 与 `reload()`，无需变更。

## 验收与测试
- 运行 `python main.py`：
  - 右键托盘菜单应稳定停留，可点击；菜单关闭后悬浮窗守护延迟恢复，不抢焦点。
  - 菜单仅显示两项：`"重载配置"` 与 `"退出"`。
  - 修改根目录 `config.json` 的 `etf_list`，保存后 1 秒内弹出提示；确认重载后，新代码立即出现在抓取列表与轮播中，日志包含更新记录（`src/app.py:390-404`）。

## 兼容性与风险
- 采用 `wx.Timer` 轮询监听，不依赖额外库；轮询周期短时 CPU 开销很小。
- 延迟恢复守护避免菜单闪退，但过长延迟可能使悬浮窗短时不置顶；200-300ms为推荐值。
- 所有新增逻辑均包裹异常处理，记录日志不影响主流程。